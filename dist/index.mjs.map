{"version":3,"sources":["../src/utils/dom-utils.ts","../src/hooks/useElementPicker.ts","../src/utils/component-path.ts","../src/types.ts","../src/utils/reporter.ts","../src/utils/console-capture.ts","../src/state-adapters/zustand.ts","../src/state-adapters/redux.ts","../src/state-adapters/jotai.ts","../src/state-adapters/index.ts","../src/hooks/useScreenshot.ts","../src/hooks/useContextCapture.ts","../src/components/FloatingButton.tsx","../src/components/ElementPicker.tsx","../src/components/DescriptionModal.tsx","../src/components/CaptureToast.tsx","../src/components/ContextReporter.tsx"],"names":["useState","useCallback","useEffect","jsxs","jsx","useRef","Fragment"],"mappings":"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","file":"index.mjs","sourcesContent":["import type { ElementInfo, ComputedStyles, DOMContext } from '../types';\n\n/**\n * Default CSS values to filter out (not useful)\n */\nconst DEFAULT_STYLES: Partial<ComputedStyles> = {\n  display: 'block',\n  position: 'static',\n  visibility: 'visible',\n  opacity: '1',\n  cursor: 'auto',\n  pointerEvents: 'auto',\n  overflow: 'visible',\n  zIndex: 'auto',\n};\n\n/**\n * Key CSS properties to capture\n */\nconst STYLE_PROPERTIES: (keyof ComputedStyles)[] = [\n  'display',\n  'position',\n  'visibility',\n  'opacity',\n  'width',\n  'height',\n  'padding',\n  'margin',\n  'border',\n  'backgroundColor',\n  'color',\n  'fontSize',\n  'fontWeight',\n  'cursor',\n  'pointerEvents',\n  'overflow',\n  'zIndex',\n];\n\n/**\n * Extract computed styles for an element, filtering out defaults\n */\nfunction extractComputedStyles(element: HTMLElement): ComputedStyles {\n  const computed = window.getComputedStyle(element);\n  const styles: Partial<ComputedStyles> = {};\n\n  for (const prop of STYLE_PROPERTIES) {\n    const kebabProp = prop.replace(/([A-Z])/g, '-$1').toLowerCase();\n    const value = computed.getPropertyValue(kebabProp);\n\n    // Skip default values\n    const defaultValue = DEFAULT_STYLES[prop];\n    if (defaultValue && value === defaultValue) continue;\n\n    // Skip \"none\" borders\n    if (prop === 'border' && value.includes('none')) continue;\n\n    // Skip transparent backgrounds\n    if (prop === 'backgroundColor' && (value === 'transparent' || value === 'rgba(0, 0, 0, 0)')) continue;\n\n    // Skip 0px padding/margin\n    if ((prop === 'padding' || prop === 'margin') && value === '0px') continue;\n\n    styles[prop] = value;\n  }\n\n  return styles as ComputedStyles;\n}\n\n/**\n * Generate a unique CSS selector for an element - simplified\n */\nfunction generateUniqueSelector(element: HTMLElement): string {\n  // Priority 1: data-testid\n  const testId = element.getAttribute('data-testid');\n  if (testId) {\n    return `[data-testid=\"${testId}\"]`;\n  }\n\n  // Priority 2: unique ID\n  if (element.id) {\n    return `#${element.id}`;\n  }\n\n  // Priority 3: data-component\n  const componentAttr = element.getAttribute('data-component');\n  if (componentAttr) {\n    return `[data-component=\"${componentAttr}\"]`;\n  }\n\n  // Priority 4: Simple class-based selector with parent context\n  const tag = element.tagName.toLowerCase();\n  let selector = tag;\n\n  // Add meaningful classes (not Tailwind utilities)\n  if (element.className && typeof element.className === 'string') {\n    const meaningfulClasses = element.className\n      .split(' ')\n      .filter((c) => {\n        if (!c) return false;\n        // Skip Tailwind-like utility classes\n        if (/^(flex|grid|block|inline|hidden|p-|m-|w-|h-|text-|bg-|border-|rounded|items-|justify-|gap-|space-)/.test(c)) return false;\n        // Skip very short classes\n        if (c.length < 3) return false;\n        // Skip classes starting with underscore (CSS modules)\n        if (c.startsWith('_')) return false;\n        return true;\n      })\n      .slice(0, 2);\n\n    if (meaningfulClasses.length > 0) {\n      selector += `.${meaningfulClasses.join('.')}`;\n    }\n  }\n\n  // Add nth-child if element has siblings of same type\n  const parent = element.parentElement;\n  if (parent) {\n    const siblings = Array.from(parent.children).filter(\n      (child) => child.tagName === element.tagName\n    );\n    if (siblings.length > 1) {\n      const index = siblings.indexOf(element) + 1;\n      selector += `:nth-of-type(${index})`;\n    }\n\n    // Add parent hint for context (just one level)\n    const parentHint = parent.id\n      ? `#${parent.id} > `\n      : parent.getAttribute('data-testid')\n        ? `[data-testid=\"${parent.getAttribute('data-testid')}\"] > `\n        : '';\n\n    if (parentHint) {\n      selector = parentHint + selector;\n    }\n  }\n\n  return selector;\n}\n\n/**\n * Get a summary string for an element (for siblings) - simplified\n */\nfunction getElementSummary(element: Element | null): string | null {\n  if (!element || !(element instanceof HTMLElement)) return null;\n\n  const tag = element.tagName.toLowerCase();\n  const id = element.id ? `#${element.id}` : '';\n  const testId = element.getAttribute('data-testid');\n  const testIdStr = testId ? `[data-testid=\"${testId}\"]` : '';\n\n  // Get first meaningful class\n  let classStr = '';\n  if (!id && !testIdStr && element.className && typeof element.className === 'string') {\n    const firstClass = element.className.split(' ').find((c) => c && c.length > 2 && !c.startsWith('_'));\n    if (firstClass) classStr = `.${firstClass}`;\n  }\n\n  // Get short text content\n  const text = element.textContent?.trim().slice(0, 20) || '';\n\n  return `<${tag}${id}${testIdStr}${classStr}>${text ? ` \"${text}${text.length >= 20 ? '...' : ''}\"` : ''}`;\n}\n\n/**\n * Get truncated HTML preview - just the opening tag\n */\nfunction getHtmlPreview(element: HTMLElement): string {\n  const tag = element.tagName.toLowerCase();\n  const id = element.id ? ` id=\"${element.id}\"` : '';\n\n  // Get key attributes\n  const testId = element.getAttribute('data-testid');\n  const testIdAttr = testId ? ` data-testid=\"${testId}\"` : '';\n\n  // Get first few meaningful classes\n  let classAttr = '';\n  if (element.className && typeof element.className === 'string') {\n    const classes = element.className.split(' ').filter(Boolean).slice(0, 3).join(' ');\n    if (classes) classAttr = ` class=\"${classes}${element.className.split(' ').length > 3 ? ' ...' : ''}\"`;\n  }\n\n  return `<${tag}${id}${testIdAttr}${classAttr}>`;\n}\n\n/**\n * Extract DOM context (parents, siblings, children) - simplified\n */\nfunction extractDOMContext(element: HTMLElement): DOMContext {\n  // Get parent chain (up to 3 levels)\n  const parents: DOMContext['parents'] = [];\n  let parent = element.parentElement;\n  let depth = 0;\n\n  while (parent && parent !== document.body && depth < 3) {\n    parents.push({\n      tagName: parent.tagName,\n      id: parent.id || '',\n      className: typeof parent.className === 'string' ? parent.className.split(' ').slice(0, 3).join(' ') : '',\n      htmlPreview: getHtmlPreview(parent),\n    });\n    parent = parent.parentElement;\n    depth++;\n  }\n\n  // Get siblings (simplified)\n  const previousSibling = getElementSummary(element.previousElementSibling);\n  const nextSibling = getElementSummary(element.nextElementSibling);\n\n  // Get child info\n  const childCount = element.children.length;\n\n  // Get inner HTML (truncated more aggressively)\n  let innerHTML = element.innerHTML.trim();\n  if (innerHTML.length > 300) {\n    innerHTML = innerHTML.slice(0, 300) + '...';\n  }\n\n  return {\n    parents,\n    previousSibling,\n    nextSibling,\n    childCount,\n    innerHTML,\n  };\n}\n\n/**\n * Extract accessibility attributes - only non-null values\n */\nfunction extractAccessibility(element: HTMLElement): ElementInfo['accessibility'] {\n  return {\n    role: element.getAttribute('role'),\n    ariaLabel: element.getAttribute('aria-label'),\n    ariaDescribedBy: element.getAttribute('aria-describedby'),\n    ariaDisabled: element.getAttribute('aria-disabled'),\n    tabIndex: element.getAttribute('tabindex'),\n  };\n}\n\n/**\n * Extract relevant information from a DOM element\n */\nexport function extractElementInfo(element: HTMLElement): ElementInfo {\n  const rect = element.getBoundingClientRect();\n\n  // Get all attributes as a plain object (filter out class which we capture separately)\n  const attributes: Record<string, string> = {};\n  for (const attr of Array.from(element.attributes)) {\n    if (!['id', 'class', 'style'].includes(attr.name)) {\n      // Skip very long attribute values\n      if (attr.value.length > 200) {\n        attributes[attr.name] = attr.value.slice(0, 200) + '...';\n      } else {\n        attributes[attr.name] = attr.value;\n      }\n    }\n  }\n\n  // Get text content, truncated if too long\n  let textContent = element.textContent?.trim() || '';\n  if (textContent.length > 150) {\n    textContent = textContent.substring(0, 150) + '...';\n  }\n\n  return {\n    tagName: element.tagName,\n    id: element.id || '',\n    className: typeof element.className === 'string' ? element.className : '',\n    textContent,\n    attributes,\n    boundingRect: {\n      x: Math.round(rect.x),\n      y: Math.round(rect.y),\n      width: Math.round(rect.width),\n      height: Math.round(rect.height),\n    },\n    selector: generateUniqueSelector(element),\n    computedStyles: extractComputedStyles(element),\n    domContext: extractDOMContext(element),\n    accessibility: extractAccessibility(element),\n  };\n}\n\n/**\n * Check if an element is part of the context reporter UI\n */\nexport function isReporterElement(element: HTMLElement): boolean {\n  return element.closest('[data-context-reporter]') !== null;\n}\n\n/**\n * Get a unique selector for an element\n */\nexport function getElementSelector(element: HTMLElement): string {\n  return generateUniqueSelector(element);\n}\n\n/**\n * Create a highlight overlay for an element\n */\nexport function createHighlightOverlay(element: HTMLElement): {\n  top: number;\n  left: number;\n  width: number;\n  height: number;\n} {\n  const rect = element.getBoundingClientRect();\n  return {\n    top: rect.top + window.scrollY,\n    left: rect.left + window.scrollX,\n    width: rect.width,\n    height: rect.height,\n  };\n}\n","import { useState, useCallback, useEffect, useRef } from 'react';\nimport type { PickerState } from '../types';\nimport { isReporterElement } from '../utils/dom-utils';\n\nexport interface UseElementPickerReturn {\n  state: PickerState;\n  startPicking: () => void;\n  stopPicking: () => void;\n  highlightPosition: {\n    top: number;\n    left: number;\n    width: number;\n    height: number;\n  } | null;\n}\n\n/**\n * Hook for element selection functionality\n */\nexport function useElementPicker(\n  onSelect: (element: HTMLElement) => void\n): UseElementPickerReturn {\n  const [state, setState] = useState<PickerState>({\n    isActive: false,\n    hoveredElement: null,\n    selectedElement: null,\n  });\n\n  const [highlightPosition, setHighlightPosition] = useState<{\n    top: number;\n    left: number;\n    width: number;\n    height: number;\n  } | null>(null);\n\n  const lastHoveredRef = useRef<HTMLElement | null>(null);\n\n  const updateHighlight = useCallback((element: HTMLElement | null) => {\n    if (!element) {\n      setHighlightPosition(null);\n      return;\n    }\n\n    const rect = element.getBoundingClientRect();\n    setHighlightPosition({\n      top: rect.top + window.scrollY,\n      left: rect.left + window.scrollX,\n      width: rect.width,\n      height: rect.height,\n    });\n  }, []);\n\n  const handleMouseMove = useCallback(\n    (event: MouseEvent) => {\n      const target = event.target as HTMLElement;\n\n      // Ignore reporter UI elements\n      if (isReporterElement(target)) {\n        return;\n      }\n\n      // Only update if element changed\n      if (target !== lastHoveredRef.current) {\n        lastHoveredRef.current = target;\n        setState((prev) => ({ ...prev, hoveredElement: target }));\n        updateHighlight(target);\n      }\n    },\n    [updateHighlight]\n  );\n\n  const handleClick = useCallback(\n    (event: MouseEvent) => {\n      const target = event.target as HTMLElement;\n\n      // Ignore reporter UI elements\n      if (isReporterElement(target)) {\n        return;\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      setState((prev) => ({\n        ...prev,\n        isActive: false,\n        selectedElement: target,\n        hoveredElement: null,\n      }));\n\n      setHighlightPosition(null);\n      onSelect(target);\n    },\n    [onSelect]\n  );\n\n  const handleKeyDown = useCallback((event: KeyboardEvent) => {\n    if (event.key === 'Escape') {\n      setState((prev) => ({\n        ...prev,\n        isActive: false,\n        hoveredElement: null,\n      }));\n      setHighlightPosition(null);\n    }\n  }, []);\n\n  const startPicking = useCallback(() => {\n    setState({\n      isActive: true,\n      hoveredElement: null,\n      selectedElement: null,\n    });\n  }, []);\n\n  const stopPicking = useCallback(() => {\n    setState((prev) => ({\n      ...prev,\n      isActive: false,\n      hoveredElement: null,\n    }));\n    setHighlightPosition(null);\n  }, []);\n\n  // Attach/detach event listeners based on active state\n  useEffect(() => {\n    if (state.isActive) {\n      document.addEventListener('mousemove', handleMouseMove, true);\n      document.addEventListener('click', handleClick, true);\n      document.addEventListener('keydown', handleKeyDown, true);\n\n      // Change cursor to crosshair\n      document.body.style.cursor = 'crosshair';\n\n      return () => {\n        document.removeEventListener('mousemove', handleMouseMove, true);\n        document.removeEventListener('click', handleClick, true);\n        document.removeEventListener('keydown', handleKeyDown, true);\n        document.body.style.cursor = '';\n      };\n    }\n  }, [state.isActive, handleMouseMove, handleClick, handleKeyDown]);\n\n  return {\n    state,\n    startPicking,\n    stopPicking,\n    highlightPosition,\n  };\n}\n","import type { ComponentPathItem, SourceLocation } from '../types';\n\n/**\n * React Fiber node structure (simplified)\n */\ninterface FiberNode {\n  tag: number;\n  type: {\n    name?: string;\n    displayName?: string;\n  } | string | null;\n  return: FiberNode | null;\n  stateNode: unknown;\n  memoizedProps?: Record<string, unknown>;\n  memoizedState?: FiberState | null;\n  _debugSource?: {\n    fileName: string;\n    lineNumber: number;\n    columnNumber?: number;\n  };\n  _debugOwner?: FiberNode;\n}\n\n/**\n * React useState/useReducer linked list structure\n */\ninterface FiberState {\n  memoizedState: unknown;\n  next: FiberState | null;\n}\n\n// React Fiber tag constants\nconst FUNCTION_COMPONENT = 0;\nconst CLASS_COMPONENT = 1;\nconst FORWARD_REF = 11;\nconst MEMO_COMPONENT = 14;\nconst SIMPLE_MEMO_COMPONENT = 15;\n\nconst COMPONENT_TAGS = new Set([\n  FUNCTION_COMPONENT,\n  CLASS_COMPONENT,\n  FORWARD_REF,\n  MEMO_COMPONENT,\n  SIMPLE_MEMO_COMPONENT,\n]);\n\n/**\n * Framework/library components to filter out (noise)\n */\nconst FRAMEWORK_COMPONENT_PATTERNS = [\n  // Next.js internals\n  /^(Server)?Root$/,\n  /^AppRouter$/,\n  /^Router$/,\n  /^HotReload$/,\n  /^DevRootHTTPAccessFallbackBoundary$/,\n  /^__next_.*__$/,\n  /^OuterLayoutRouter$/,\n  /^InnerLayoutRouter$/,\n  /^SegmentStateProvider$/,\n  /^SegmentViewNode$/,\n  /^RenderFromTemplateContext$/,\n  /^ScrollAndFocusHandler$/,\n  /^InnerScrollAndFocusHandler$/,\n  /^HTTPAccessFallbackBoundary$/,\n  /^HTTPAccessFallbackErrorBoundary$/,\n  /^RedirectBoundary$/,\n  /^RedirectErrorBoundary$/,\n  /^LoadingBoundary$/,\n  /^ClientPageRoot$/,\n  /^AppDevOverlayErrorBoundary$/,\n  // React internals\n  /^Suspense$/,\n  /^Fragment$/,\n  /^StrictMode$/,\n  /^Profiler$/,\n  // Common library wrappers\n  /^Provider$/,\n  /^QueryClientProvider$/,\n  /^ThemeProvider$/,\n  /^ErrorBoundary$/,\n  /^(Root)?ErrorBoundary(Handler)?$/,\n  /Context$/,\n];\n\n/**\n * Props to exclude from capture (sensitive, too large, or Next.js async props)\n */\nconst EXCLUDED_PROPS = new Set([\n  'children',\n  'key',\n  'ref',\n  '__self',\n  '__source',\n  'password',\n  'token',\n  'apiKey',\n  'secret',\n  'credentials',\n  // Next.js 15 async props that are Promises\n  'params',\n  'searchParams',\n]);\n\n/**\n * Check if a component name is a framework/library internal\n */\nfunction isFrameworkComponent(name: string): boolean {\n  return FRAMEWORK_COMPONENT_PATTERNS.some((pattern) => pattern.test(name));\n}\n\n/**\n * Get the React Fiber node from a DOM element\n */\nfunction getFiberFromElement(element: HTMLElement): FiberNode | null {\n  const keys = Object.keys(element);\n  const fiberKey = keys.find(\n    (key) =>\n      key.startsWith('__reactFiber$') ||\n      key.startsWith('__reactInternalInstance$')\n  );\n\n  if (fiberKey) {\n    return (element as unknown as Record<string, FiberNode>)[fiberKey];\n  }\n\n  return null;\n}\n\n/**\n * Get component name from a fiber node\n */\nfunction getComponentName(fiber: FiberNode): string | null {\n  if (!fiber.type) return null;\n\n  if (typeof fiber.type === 'string') {\n    return null; // DOM element, not a component\n  }\n\n  if (fiber.type.displayName) {\n    return fiber.type.displayName;\n  }\n\n  if (fiber.type.name) {\n    return fiber.type.name;\n  }\n\n  return null;\n}\n\n/**\n * Check if a fiber node represents a React component\n */\nfunction isComponentFiber(fiber: FiberNode): boolean {\n  return COMPONENT_TAGS.has(fiber.tag);\n}\n\n/**\n * Extract source location from fiber debug info\n */\nfunction extractSourceLocation(fiber: FiberNode): SourceLocation | undefined {\n  if (fiber._debugSource) {\n    // Clean up the file path - remove webpack/vite prefixes\n    let fileName = fiber._debugSource.fileName;\n\n    // Remove common prefixes\n    fileName = fileName\n      .replace(/^webpack:\\/\\/[^/]*\\//, '')\n      .replace(/^\\/_next\\//, '')\n      .replace(/^\\.\\//, '');\n\n    return {\n      fileName,\n      lineNumber: fiber._debugSource.lineNumber,\n      columnNumber: fiber._debugSource.columnNumber,\n    };\n  }\n\n  return undefined;\n}\n\n/**\n * Check if a value is a meaningful state value (not React internals)\n */\nfunction isMeaningfulStateValue(value: unknown): boolean {\n  if (value === null || value === undefined) return false;\n\n  // Skip React internal structures\n  if (typeof value === 'object' && value !== null) {\n    const obj = value as Record<string, unknown>;\n\n    // Skip effect hooks (have destroy/create)\n    if ('destroy' in obj || 'create' in obj) return false;\n\n    // Skip ref objects\n    if ('current' in obj && Object.keys(obj).length === 1) return false;\n\n    // Skip internal persist structures\n    if ('persist' in obj && Object.keys(obj).length === 1) return false;\n\n    // Skip arrays that are just [null, [...]]\n    if (Array.isArray(value) && value.length === 2 && value[0] === null) return false;\n  }\n\n  return true;\n}\n\n/**\n * Check if an object is a React Query internal structure (not useful to show)\n */\nfunction isReactQueryInternal(obj: Record<string, unknown>): boolean {\n  // Internal observer/query objects have listeners and options\n  if ('listeners' in obj && 'options' in obj) return true;\n  // Internal state with just _defaulted\n  if ('_defaulted' in obj && Object.keys(obj).length <= 2) return true;\n  return false;\n}\n\n/**\n * Check if an object is React Query mutation state in idle state (not useful)\n */\nfunction isIdleMutationState(obj: Record<string, unknown>): boolean {\n  // Mutation state has isIdle and submittedAt\n  if ('isIdle' in obj && 'submittedAt' in obj) {\n    // If idle with no meaningful data, skip it\n    if (obj.isIdle === true && obj.status === 'idle') return true;\n  }\n  return false;\n}\n\n/**\n * Check if an object is empty or only contains empty/null values\n */\nfunction isEmptyObject(obj: Record<string, unknown>): boolean {\n  const keys = Object.keys(obj);\n  if (keys.length === 0) return true;\n  // Check if all values are null, undefined, or empty\n  return keys.every(k => {\n    const v = obj[k];\n    if (v === null || v === undefined) return true;\n    if (typeof v === 'object' && Object.keys(v as object).length === 0) return true;\n    return false;\n  });\n}\n\n/**\n * Clean up React Query state to only show useful fields\n */\nfunction cleanReactQueryState(state: Record<string, unknown>): Record<string, unknown> | null {\n  // Skip React Query internal structures\n  if (isReactQueryInternal(state)) return null;\n\n  // Check if this looks like React Query state (has status or fetchStatus)\n  if (!('status' in state) && !('fetchStatus' in state)) return null;\n\n  const cleaned: Record<string, unknown> = { _type: 'ReactQuery' };\n\n  // Always include status\n  if ('status' in state) {\n    cleaned.status = state.status;\n  }\n\n  // Include data if present\n  if ('data' in state && state.data !== null && state.data !== undefined) {\n    const dataStr = JSON.stringify(state.data);\n    if (dataStr.length > 1000) {\n      cleaned.data = '[Large data object - truncated]';\n    } else {\n      cleaned.data = state.data;\n    }\n  }\n\n  // Include error if present\n  if ('error' in state && state.error) {\n    cleaned.error = state.error;\n  }\n\n  // Only include boolean flags that are TRUE (skip all the false ones)\n  const boolFields = ['isLoading', 'isError', 'isPending', 'isFetching'];\n  for (const field of boolFields) {\n    if (state[field] === true) {\n      cleaned[field] = true;\n    }\n  }\n\n  // Only return if we have more than just _type and status\n  const hasUsefulData = 'data' in cleaned || 'error' in cleaned ||\n    boolFields.some(f => cleaned[f] === true);\n\n  return hasUsefulData || cleaned.status !== 'idle' ? cleaned : null;\n}\n\n/**\n * Check if a value is a Promise\n */\nfunction isPromise(value: unknown): boolean {\n  return value !== null &&\n    typeof value === 'object' &&\n    typeof (value as { then?: unknown }).then === 'function';\n}\n\n/**\n * Sanitize and extract props from fiber\n */\nfunction extractProps(fiber: FiberNode): Record<string, unknown> | undefined {\n  if (!fiber.memoizedProps) return undefined;\n\n  const props: Record<string, unknown> = {};\n  let hasProps = false;\n\n  // Use Object.keys + direct access to avoid triggering Promise enumeration\n  const memoizedProps = fiber.memoizedProps as Record<string, unknown>;\n  const keys = Object.keys(memoizedProps);\n\n  for (const key of keys) {\n    if (EXCLUDED_PROPS.has(key)) continue;\n\n    let value: unknown;\n    try {\n      value = memoizedProps[key];\n    } catch {\n      // Skip if accessing the property throws\n      continue;\n    }\n\n    // Skip Promises (Next.js 15 async props)\n    if (isPromise(value)) continue;\n\n    if (typeof value === 'function') {\n      // Skip event handlers - they're not useful\n      if (key.startsWith('on')) continue;\n      props[key] = '[Function]';\n      hasProps = true;\n      continue;\n    }\n\n    if (value && typeof value === 'object' && '$$typeof' in (value as object)) {\n      continue; // Skip React elements entirely\n    }\n\n    if (typeof value === 'string' && value.length > 100) {\n      props[key] = value.slice(0, 100) + '...';\n      hasProps = true;\n      continue;\n    }\n\n    if (Array.isArray(value) && value.length > 10) {\n      props[key] = `[Array(${value.length})]`;\n      hasProps = true;\n      continue;\n    }\n\n    // Skip empty objects/arrays\n    if (typeof value === 'object' && value !== null) {\n      if (Array.isArray(value) && value.length === 0) continue;\n      try {\n        if (Object.keys(value).length === 0) continue;\n      } catch {\n        // Skip if Object.keys throws (e.g., on a Proxy)\n        continue;\n      }\n    }\n\n    try {\n      JSON.stringify(value);\n      props[key] = value;\n      hasProps = true;\n    } catch {\n      // Skip unserializable\n    }\n  }\n\n  return hasProps ? props : undefined;\n}\n\n/**\n * Extract local state from fiber (useState/useReducer values)\n */\nfunction extractLocalState(fiber: FiberNode): unknown[] | undefined {\n  if (fiber.tag !== FUNCTION_COMPONENT) return undefined;\n\n  const states: unknown[] = [];\n  let state = fiber.memoizedState as FiberState | null;\n\n  let count = 0;\n  while (state && count < 10) {\n    const value = state.memoizedState;\n\n    // Skip non-meaningful values\n    if (!isMeaningfulStateValue(value)) {\n      state = state.next;\n      count++;\n      continue;\n    }\n\n    try {\n      if (typeof value === 'function') {\n        // Skip - likely a dispatch function\n      } else if (value && typeof value === 'object') {\n        const obj = value as Record<string, unknown>;\n\n        // Skip React Query internal structures\n        if (isReactQueryInternal(obj)) {\n          state = state.next;\n          count++;\n          continue;\n        }\n\n        // Skip idle mutation state\n        if (isIdleMutationState(obj)) {\n          state = state.next;\n          count++;\n          continue;\n        }\n\n        // Skip empty objects\n        if (isEmptyObject(obj)) {\n          state = state.next;\n          count++;\n          continue;\n        }\n\n        // Check if it's React Query state\n        const cleaned = cleanReactQueryState(obj);\n        if (cleaned) {\n          states.push(cleaned);\n        } else if (!('$$typeof' in value)) {\n          // Regular object - include if not too large\n          const str = JSON.stringify(value);\n          if (str.length < 500) {\n            states.push(value);\n          } else {\n            states.push('[Large object]');\n          }\n        }\n      } else {\n        // Primitive value\n        states.push(value);\n      }\n    } catch {\n      // Skip unserializable\n    }\n\n    state = state?.next ?? null;\n    count++;\n  }\n\n  // Filter out arrays with only simple primitives (not very informative)\n  const meaningfulStates = states.filter(s => {\n    // Keep objects (including React Query state)\n    if (s && typeof s === 'object') return true;\n    // Keep strings that aren't empty\n    if (typeof s === 'string' && s.length > 0) return true;\n    // Keep numbers\n    if (typeof s === 'number') return true;\n    // Skip booleans and nullish values\n    return false;\n  });\n\n  return meaningfulStates.length > 0 ? meaningfulStates : undefined;\n}\n\n/**\n * Extract the component path from a DOM element up to the root\n */\nexport function extractComponentPath(element: HTMLElement): ComponentPathItem[] {\n  const allComponents: ComponentPathItem[] = [];\n  const seen = new Set<string>();\n\n  let fiber = getFiberFromElement(element);\n\n  while (fiber) {\n    if (isComponentFiber(fiber)) {\n      const name = getComponentName(fiber);\n      if (name && !seen.has(name)) {\n        seen.add(name);\n\n        const item: ComponentPathItem = {\n          name,\n          source:\n            fiber.type && typeof fiber.type !== 'string' && fiber.type.displayName\n              ? 'displayName'\n              : 'fiber',\n        };\n\n        const sourceLocation = extractSourceLocation(fiber);\n        if (sourceLocation) {\n          item.sourceLocation = sourceLocation;\n        }\n\n        // Only extract props/state for non-framework components\n        if (!isFrameworkComponent(name)) {\n          const props = extractProps(fiber);\n          if (props) {\n            item.props = props;\n          }\n\n          const localState = extractLocalState(fiber);\n          if (localState) {\n            item.state = localState;\n          }\n        }\n\n        allComponents.unshift(item);\n      }\n    }\n    fiber = fiber.return;\n  }\n\n  // Check for data-component attributes\n  let current: HTMLElement | null = element;\n  while (current) {\n    const componentAttr = current.getAttribute('data-component');\n    if (componentAttr && !seen.has(componentAttr)) {\n      seen.add(componentAttr);\n      allComponents.push({ name: componentAttr, source: 'attribute' });\n    }\n    current = current.parentElement;\n  }\n\n  // Filter out framework components for cleaner output\n  const appComponents = allComponents.filter((c) => !isFrameworkComponent(c.name));\n\n  // If filtering removed everything, return at least the last few components\n  if (appComponents.length === 0 && allComponents.length > 0) {\n    return allComponents.slice(-5);\n  }\n\n  return appComponents;\n}\n\n/**\n * Format component path as a tree string\n */\nexport function formatComponentPath(path: ComponentPathItem[]): string {\n  if (path.length === 0) return 'Unknown';\n\n  return path\n    .map((item, index) => {\n      const indent = '  '.repeat(index);\n      const prefix = index === 0 ? '' : ' ';\n      const suffix = index === path.length - 1 ? '   selected' : '';\n      const source = item.sourceLocation\n        ? ` (${item.sourceLocation.fileName}:${item.sourceLocation.lineNumber})`\n        : '';\n      return `${indent}${prefix}${item.name}${source}${suffix}`;\n    })\n    .join('\\n');\n}\n","/**\n * Position options for the floating button\n */\nexport type ButtonPosition = 'bottom-right' | 'bottom-left' | 'top-right' | 'top-left';\n\n/**\n * Reporter configuration for server/console output\n */\nexport interface ReporterConfig {\n  /** Server URL for direct file writing (default: http://localhost:9847) */\n  serverUrl?: string;\n  /** Timeout for server requests in ms (default: 1000) */\n  serverTimeout?: number;\n  /** Always use console even if server is available */\n  forceConsole?: boolean;\n}\n\n/**\n * Configuration props for the ContextReporter component\n */\nexport interface ContextReporterProps {\n  /** Position of the floating button */\n  position?: ButtonPosition;\n  /** Keyboard shortcut to trigger capture (default: 'ctrl+shift+.') */\n  hotkey?: string;\n  /** Custom function to capture additional state */\n  getCustomState?: () => unknown;\n  /** Keys to exclude from captured state */\n  excludeStateKeys?: string[];\n  /** Callback when a report is captured */\n  onCapture?: (report: ContextReport) => void;\n  /** z-index for the overlay (default: 9999) */\n  zIndex?: number;\n  /** Reporter configuration (server URL, timeout, etc.) */\n  reporter?: ReporterConfig;\n}\n\n/**\n * Computed CSS styles (key properties only)\n */\nexport interface ComputedStyles {\n  display: string;\n  position: string;\n  visibility: string;\n  opacity: string;\n  width: string;\n  height: string;\n  padding: string;\n  margin: string;\n  border: string;\n  backgroundColor: string;\n  color: string;\n  fontSize: string;\n  fontWeight: string;\n  cursor: string;\n  pointerEvents: string;\n  overflow: string;\n  zIndex: string;\n}\n\n/**\n * DOM context - parent chain and siblings\n */\nexport interface DOMContext {\n  /** Parent elements (up to 3 levels) */\n  parents: Array<{\n    tagName: string;\n    id: string;\n    className: string;\n    /** Truncated outer HTML */\n    htmlPreview: string;\n  }>;\n  /** Previous sibling summary */\n  previousSibling: string | null;\n  /** Next sibling summary */\n  nextSibling: string | null;\n  /** Number of child elements */\n  childCount: number;\n  /** Inner HTML (truncated) */\n  innerHTML: string;\n}\n\n/**\n * Information about a DOM element\n */\nexport interface ElementInfo {\n  tagName: string;\n  id: string;\n  className: string;\n  textContent: string;\n  attributes: Record<string, string>;\n  boundingRect: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n  };\n  /** Unique CSS selector to find this element */\n  selector: string;\n  /** Key computed CSS styles */\n  computedStyles: ComputedStyles;\n  /** DOM context (parents, siblings, children) */\n  domContext: DOMContext;\n  /** Accessibility attributes */\n  accessibility: {\n    role: string | null;\n    ariaLabel: string | null;\n    ariaDescribedBy: string | null;\n    ariaDisabled: string | null;\n    tabIndex: string | null;\n  };\n}\n\n/**\n * Source file location from React DevTools\n */\nexport interface SourceLocation {\n  fileName: string;\n  lineNumber: number;\n  columnNumber?: number;\n}\n\n/**\n * A component in the React component tree path\n */\nexport interface ComponentPathItem {\n  name: string;\n  source: 'fiber' | 'attribute' | 'displayName';\n  /** Source file location if available */\n  sourceLocation?: SourceLocation;\n  /** Props passed to component (sanitized) */\n  props?: Record<string, unknown>;\n  /** Local state values (from useState/useReducer) */\n  state?: unknown[];\n}\n\n/**\n * Captured application state from various state managers\n */\nexport interface CapturedAppState {\n  zustand?: Record<string, unknown>;\n  redux?: Record<string, unknown>;\n  jotai?: Record<string, unknown>;\n  custom?: unknown;\n}\n\n/**\n * Environment information\n */\nexport interface EnvironmentInfo {\n  react?: string;\n  userAgent: string;\n  timestamp: string;\n  url: string;\n}\n\n/**\n * Viewport dimensions\n */\nexport interface ViewportInfo {\n  width: number;\n  height: number;\n}\n\n/**\n * Console error/warning captured near the time of report\n */\nexport interface ConsoleEntry {\n  level: 'error' | 'warn';\n  message: string;\n  timestamp: number;\n}\n\n/**\n * Complete context report structure\n */\nexport interface ContextReport {\n  id: string;\n  timestamp: string;\n  url: string;\n  viewport: ViewportInfo;\n  description?: string;\n  selectedElement: ElementInfo;\n  componentPath: ComponentPathItem[];\n  appState: CapturedAppState;\n  environment: EnvironmentInfo;\n  /** Recent console errors/warnings */\n  consoleErrors?: ConsoleEntry[];\n}\n\n/**\n * Screenshot data linked to a report by ID\n */\nexport interface ContextScreenshot {\n  reportId: string;\n  data: string; // base64 data URL\n}\n\n/**\n * Internal state for the element picker\n */\nexport interface PickerState {\n  isActive: boolean;\n  hoveredElement: HTMLElement | null;\n  selectedElement: HTMLElement | null;\n}\n\n/**\n * State adapter interface for extracting state from different state managers\n */\nexport interface StateAdapter {\n  name: string;\n  isAvailable: () => boolean;\n  getState: () => Record<string, unknown> | null;\n}\n\n/**\n * Console log tags for structured output\n */\nexport const CONSOLE_TAGS = {\n  REPORT: '[CLAUDE_CONTEXT_REPORT]',\n  SCREENSHOT: '[CLAUDE_CONTEXT_SCREENSHOT]',\n} as const;\n","import { CONSOLE_TAGS, type ContextReport, type ContextScreenshot, type ConsoleEntry } from '../types';\n\nconst DEFAULT_SERVER_URL = 'http://localhost:9847';\nconst LOCAL_STORAGE_KEY = 'contextReports';\n\n/**\n * Reporter configuration\n */\nexport interface ReporterConfig {\n  /** Server URL for direct file writing (default: http://localhost:9847) */\n  serverUrl?: string;\n  /** Timeout for server requests in ms (default: 1000) */\n  serverTimeout?: number;\n  /** Always use console even if server is available */\n  forceConsole?: boolean;\n}\n\nlet cachedServerAvailable: boolean | null = null;\nlet lastServerCheck = 0;\nconst SERVER_CHECK_INTERVAL = 5000; // Re-check every 5 seconds\n\n/**\n * Check if the local server is available\n */\nasync function checkServerAvailable(serverUrl: string, timeout: number): Promise<boolean> {\n  const now = Date.now();\n\n  // Use cached result if recent\n  if (cachedServerAvailable !== null && now - lastServerCheck < SERVER_CHECK_INTERVAL) {\n    return cachedServerAvailable;\n  }\n\n  try {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n    const response = await fetch(`${serverUrl}/health`, {\n      method: 'GET',\n      signal: controller.signal,\n    });\n\n    clearTimeout(timeoutId);\n    cachedServerAvailable = response.ok;\n    lastServerCheck = now;\n    return cachedServerAvailable;\n  } catch {\n    cachedServerAvailable = false;\n    lastServerCheck = now;\n    return false;\n  }\n}\n\n/**\n * Send report to server\n */\nasync function sendToServer(\n  endpoint: string,\n  data: ContextReport | ContextScreenshot,\n  serverUrl: string,\n  timeout: number\n): Promise<boolean> {\n  try {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n    const response = await fetch(`${serverUrl}${endpoint}`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data),\n      signal: controller.signal,\n    });\n\n    clearTimeout(timeoutId);\n    return response.ok;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Generate a unique report ID\n */\nexport function generateReportId(): string {\n  const timestamp = Date.now();\n  const random = Math.random().toString(36).substring(2, 8);\n  return `report-${timestamp}-${random}`;\n}\n\n/**\n * Save report to localStorage for retrieval by Claude Code MCP\n * Reports are stored as an array to preserve multiple captures\n */\nfunction saveToLocalStorage(report: ContextReport): void {\n  try {\n    const existing = localStorage.getItem(LOCAL_STORAGE_KEY);\n    const reports: ContextReport[] = existing ? JSON.parse(existing) : [];\n\n    // Add new report (most recent first)\n    reports.unshift(report);\n\n    // Keep only the last 20 reports to prevent storage overflow\n    const trimmed = reports.slice(0, 20);\n\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(trimmed));\n  } catch (err) {\n    console.warn('[ContextReporter] Failed to save to localStorage:', err);\n  }\n}\n\n/**\n * Get all reports from localStorage\n */\nexport function getStoredReports(): ContextReport[] {\n  try {\n    const stored = localStorage.getItem(LOCAL_STORAGE_KEY);\n    return stored ? JSON.parse(stored) : [];\n  } catch {\n    return [];\n  }\n}\n\n/**\n * Clear all reports from localStorage\n */\nexport function clearStoredReports(): void {\n  try {\n    localStorage.removeItem(LOCAL_STORAGE_KEY);\n  } catch (err) {\n    console.warn('[ContextReporter] Failed to clear localStorage:', err);\n  }\n}\n\n/**\n * Output a context report - tries server first, falls back to console\n * Always saves to localStorage for retrieval via Claude Code MCP\n */\nexport async function logContextReport(\n  report: ContextReport,\n  config: ReporterConfig = {}\n): Promise<{ method: 'server' | 'console'; success: boolean }> {\n  const {\n    serverUrl = DEFAULT_SERVER_URL,\n    serverTimeout = 1000,\n    forceConsole = false,\n  } = config;\n\n  // Always save to localStorage for MCP retrieval\n  saveToLocalStorage(report);\n\n  // Try server first (unless forced to console)\n  if (!forceConsole) {\n    const serverAvailable = await checkServerAvailable(serverUrl, serverTimeout);\n\n    if (serverAvailable) {\n      const sent = await sendToServer('/report', report, serverUrl, serverTimeout);\n      if (sent) {\n        // Also log a brief console message for visibility\n        console.log(`[ContextReporter] Report sent to server: ${report.id}`);\n        return { method: 'server', success: true };\n      }\n    }\n  }\n\n  // Fall back to console logging\n  console.log(CONSOLE_TAGS.REPORT, JSON.stringify(report));\n\n  // Also log a human-readable summary\n  console.group(`Context Report: ${report.id}`);\n  console.log('URL:', report.url);\n  console.log('Element:', `${report.selectedElement.tagName}#${report.selectedElement.id || '(no id)'}`);\n  console.log('Component Path:', report.componentPath.map((c) => c.name).join(' > '));\n  if (report.description) {\n    console.log('Description:', report.description);\n  }\n  console.log('Note: Run /process-reports in Claude Code to retrieve this report');\n  console.groupEnd();\n\n  return { method: 'console', success: true };\n}\n\n/**\n * Output a screenshot - tries server first, falls back to console\n */\nexport async function logContextScreenshot(\n  screenshot: ContextScreenshot,\n  config: ReporterConfig = {}\n): Promise<{ method: 'server' | 'console'; success: boolean }> {\n  const {\n    serverUrl = DEFAULT_SERVER_URL,\n    serverTimeout = 2000, // Longer timeout for screenshots (larger payload)\n    forceConsole = false,\n  } = config;\n\n  // Try server first (unless forced to console)\n  if (!forceConsole) {\n    const serverAvailable = await checkServerAvailable(serverUrl, serverTimeout);\n\n    if (serverAvailable) {\n      const sent = await sendToServer('/screenshot', screenshot, serverUrl, serverTimeout);\n      if (sent) {\n        console.log(`[ContextReporter] Screenshot sent to server: ${screenshot.reportId}`);\n        return { method: 'server', success: true };\n      }\n    }\n  }\n\n  // Fall back to console logging\n  console.log(CONSOLE_TAGS.SCREENSHOT, JSON.stringify(screenshot));\n  console.log(`[ContextReporter] Screenshot captured for report: ${screenshot.reportId}`);\n\n  return { method: 'console', success: true };\n}\n\n/**\n * Create a full context report object\n */\nexport function createContextReport(params: {\n  id: string;\n  selectedElement: ContextReport['selectedElement'];\n  componentPath: ContextReport['componentPath'];\n  appState: ContextReport['appState'];\n  description?: string;\n  consoleErrors?: ConsoleEntry[];\n}): ContextReport {\n  return {\n    id: params.id,\n    timestamp: new Date().toISOString(),\n    url: window.location.href,\n    viewport: {\n      width: window.innerWidth,\n      height: window.innerHeight,\n    },\n    description: params.description,\n    selectedElement: params.selectedElement,\n    componentPath: params.componentPath,\n    appState: params.appState,\n    environment: {\n      react: detectReactVersion(),\n      userAgent: navigator.userAgent,\n      timestamp: new Date().toISOString(),\n      url: window.location.href,\n    },\n    consoleErrors: params.consoleErrors,\n  };\n}\n\n/**\n * Detect React version if available\n */\nfunction detectReactVersion(): string | undefined {\n  const win = window as unknown as Record<string, unknown>;\n\n  // Check for React DevTools hook\n  const devTools = win.__REACT_DEVTOOLS_GLOBAL_HOOK__ as\n    | { renderers?: Map<number, { version?: string }> }\n    | undefined;\n  if (devTools?.renderers) {\n    for (const renderer of devTools.renderers.values()) {\n      if (renderer.version) {\n        return renderer.version;\n      }\n    }\n  }\n\n  // Check for exposed React global\n  const react = win.React as { version?: string } | undefined;\n  if (react?.version) {\n    return react.version;\n  }\n\n  return undefined;\n}\n\n/**\n * Check if server is currently available (for UI feedback)\n */\nexport async function isServerAvailable(\n  serverUrl: string = DEFAULT_SERVER_URL,\n  timeout: number = 1000\n): Promise<boolean> {\n  return checkServerAvailable(serverUrl, timeout);\n}\n\n/**\n * Clear the server availability cache (useful after starting server)\n */\nexport function clearServerCache(): void {\n  cachedServerAvailable = null;\n  lastServerCheck = 0;\n}\n","import type { ConsoleEntry } from '../types';\n\n/**\n * Buffer to store recent console errors and warnings\n */\nconst consoleBuffer: ConsoleEntry[] = [];\nconst MAX_BUFFER_SIZE = 50;\nconst MAX_AGE_MS = 60000; // Keep entries for 1 minute\n\nlet isIntercepting = false;\nlet originalError: typeof console.error | null = null;\nlet originalWarn: typeof console.warn | null = null;\n\n/**\n * Start intercepting console.error and console.warn\n */\nexport function startConsoleCapture(): void {\n  if (isIntercepting) return;\n\n  originalError = console.error;\n  originalWarn = console.warn;\n\n  console.error = (...args: unknown[]) => {\n    addToBuffer('error', args);\n    originalError?.apply(console, args);\n  };\n\n  console.warn = (...args: unknown[]) => {\n    addToBuffer('warn', args);\n    originalWarn?.apply(console, args);\n  };\n\n  isIntercepting = true;\n}\n\n/**\n * Stop intercepting console\n */\nexport function stopConsoleCapture(): void {\n  if (!isIntercepting) return;\n\n  if (originalError) {\n    console.error = originalError;\n  }\n  if (originalWarn) {\n    console.warn = originalWarn;\n  }\n\n  isIntercepting = false;\n}\n\n/**\n * Add an entry to the buffer\n */\nfunction addToBuffer(level: 'error' | 'warn', args: unknown[]): void {\n  const message = args\n    .map((arg) => {\n      if (arg instanceof Error) {\n        return `${arg.name}: ${arg.message}\\n${arg.stack || ''}`;\n      }\n      if (typeof arg === 'object') {\n        try {\n          return JSON.stringify(arg, null, 2);\n        } catch {\n          return String(arg);\n        }\n      }\n      return String(arg);\n    })\n    .join(' ');\n\n  // Don't capture our own logs\n  if (message.includes('[ContextReporter]')) return;\n\n  consoleBuffer.push({\n    level,\n    message: message.slice(0, 1000), // Truncate long messages\n    timestamp: Date.now(),\n  });\n\n  // Trim buffer if too large\n  while (consoleBuffer.length > MAX_BUFFER_SIZE) {\n    consoleBuffer.shift();\n  }\n}\n\n/**\n * Get recent console errors and warnings\n */\nexport function getRecentConsoleEntries(maxAge: number = MAX_AGE_MS): ConsoleEntry[] {\n  const cutoff = Date.now() - maxAge;\n\n  // Filter out old entries and return a copy\n  return consoleBuffer\n    .filter((entry) => entry.timestamp > cutoff)\n    .map((entry) => ({ ...entry }));\n}\n\n/**\n * Clear the console buffer\n */\nexport function clearConsoleBuffer(): void {\n  consoleBuffer.length = 0;\n}\n","import type { StateAdapter } from '../types';\n\n/**\n * Zustand store reference type\n */\ninterface ZustandStore {\n  getState: () => Record<string, unknown>;\n}\n\n/**\n * Find Zustand stores exposed on the window or through devtools\n */\nfunction findZustandStores(): Record<string, ZustandStore> | null {\n  const win = window as unknown as Record<string, unknown>;\n\n  // Check for stores exposed via zustand/middleware devtools\n  const devtools = win.__ZUSTAND_DEVTOOLS_STORES__ as Map<string, ZustandStore> | undefined;\n  if (devtools instanceof Map && devtools.size > 0) {\n    const stores: Record<string, ZustandStore> = {};\n    devtools.forEach((store, name) => {\n      stores[name] = store;\n    });\n    return stores;\n  }\n\n  // Check for explicitly exposed stores (common pattern)\n  const exposedStore = win.__ZUSTAND_STORE__ as ZustandStore | undefined;\n  if (exposedStore && typeof exposedStore.getState === 'function') {\n    return { default: exposedStore };\n  }\n\n  // Look for any property that looks like a zustand store\n  const potentialStores: Record<string, ZustandStore> = {};\n  for (const key of Object.keys(win)) {\n    if (key.toLowerCase().includes('store') || key.toLowerCase().includes('zustand')) {\n      const value = win[key] as ZustandStore | undefined;\n      if (value && typeof value.getState === 'function') {\n        potentialStores[key] = value;\n      }\n    }\n  }\n\n  if (Object.keys(potentialStores).length > 0) {\n    return potentialStores;\n  }\n\n  return null;\n}\n\n/**\n * Zustand state adapter\n */\nexport const zustandAdapter: StateAdapter = {\n  name: 'zustand',\n\n  isAvailable(): boolean {\n    return findZustandStores() !== null;\n  },\n\n  getState(): Record<string, unknown> | null {\n    const stores = findZustandStores();\n    if (!stores) return null;\n\n    const combinedState: Record<string, unknown> = {};\n\n    for (const [name, store] of Object.entries(stores)) {\n      try {\n        const state = store.getState();\n        if (name === 'default') {\n          Object.assign(combinedState, state);\n        } else {\n          combinedState[name] = state;\n        }\n      } catch {\n        // Store might be in a bad state, skip it\n      }\n    }\n\n    return Object.keys(combinedState).length > 0 ? combinedState : null;\n  },\n};\n\n/**\n * Helper to expose a zustand store for the context reporter\n * Add this to your app: exposeZustandStore(useStore)\n */\nexport function exposeZustandStore(store: ZustandStore, name = 'default'): void {\n  const win = window as unknown as Record<string, unknown>;\n\n  if (!win.__ZUSTAND_DEVTOOLS_STORES__) {\n    win.__ZUSTAND_DEVTOOLS_STORES__ = new Map<string, ZustandStore>();\n  }\n\n  (win.__ZUSTAND_DEVTOOLS_STORES__ as Map<string, ZustandStore>).set(name, store);\n}\n","import type { StateAdapter } from '../types';\n\n/**\n * Redux store reference type\n */\ninterface ReduxStore {\n  getState: () => Record<string, unknown>;\n}\n\n/**\n * Find Redux store exposed via Redux DevTools or window\n */\nfunction findReduxStore(): ReduxStore | null {\n  const win = window as unknown as Record<string, unknown>;\n\n  // Check for Redux DevTools extension\n  const devTools = win.__REDUX_DEVTOOLS_EXTENSION__ as\n    | { connect?: () => { init?: (state: unknown) => void } }\n    | undefined;\n\n  // Check for store exposed through Redux DevTools\n  const devToolsStore = win.__REDUX_DEVTOOLS_STORE__ as ReduxStore | undefined;\n  if (devToolsStore && typeof devToolsStore.getState === 'function') {\n    return devToolsStore;\n  }\n\n  // Check for explicitly exposed store (common pattern)\n  const exposedStore = win.__REDUX_STORE__ as ReduxStore | undefined;\n  if (exposedStore && typeof exposedStore.getState === 'function') {\n    return exposedStore;\n  }\n\n  // Check for store property (some apps expose it directly)\n  const store = win.store as ReduxStore | undefined;\n  if (store && typeof store.getState === 'function') {\n    // Verify it looks like a Redux store (has subscribe, dispatch)\n    const maybeRedux = store as unknown as Record<string, unknown>;\n    if (typeof maybeRedux.subscribe === 'function' && typeof maybeRedux.dispatch === 'function') {\n      return store;\n    }\n  }\n\n  // Check if devtools extension is available but store isn't exposed\n  if (devTools) {\n    // Store exists but isn't directly accessible - we can't get state\n    console.debug('[ContextReporter] Redux DevTools detected but store not accessible');\n  }\n\n  return null;\n}\n\n/**\n * Redux state adapter\n */\nexport const reduxAdapter: StateAdapter = {\n  name: 'redux',\n\n  isAvailable(): boolean {\n    return findReduxStore() !== null;\n  },\n\n  getState(): Record<string, unknown> | null {\n    const store = findReduxStore();\n    if (!store) return null;\n\n    try {\n      return store.getState();\n    } catch {\n      return null;\n    }\n  },\n};\n\n/**\n * Helper to expose a Redux store for the context reporter\n * Add this to your app: exposeReduxStore(store)\n */\nexport function exposeReduxStore(store: ReduxStore): void {\n  const win = window as unknown as Record<string, unknown>;\n  win.__REDUX_DEVTOOLS_STORE__ = store;\n}\n","import type { StateAdapter } from '../types';\n\n/**\n * Jotai atom with debug label\n */\ninterface JotaiAtom {\n  debugLabel?: string;\n  toString: () => string;\n}\n\n/**\n * Jotai store reference type\n */\ninterface JotaiStore {\n  get: <T>(atom: JotaiAtom) => T;\n}\n\n/**\n * Jotai devtools store type\n */\ninterface JotaiDevToolsState {\n  values: Map<JotaiAtom, unknown>;\n  atoms: Set<JotaiAtom>;\n}\n\n/**\n * Find Jotai store and atoms\n */\nfunction findJotaiState(): Record<string, unknown> | null {\n  const win = window as unknown as Record<string, unknown>;\n\n  // Check for Jotai DevTools\n  const devToolsState = win.__JOTAI_DEVTOOLS_STATE__ as JotaiDevToolsState | undefined;\n  if (devToolsState && devToolsState.values instanceof Map) {\n    const state: Record<string, unknown> = {};\n\n    devToolsState.values.forEach((value, atom) => {\n      const label = atom.debugLabel || atom.toString();\n      state[label] = value;\n    });\n\n    return Object.keys(state).length > 0 ? state : null;\n  }\n\n  // Check for exposed store\n  const exposedStore = win.__JOTAI_STORE__ as JotaiStore | undefined;\n  const exposedAtoms = win.__JOTAI_ATOMS__ as JotaiAtom[] | undefined;\n\n  if (exposedStore && typeof exposedStore.get === 'function' && Array.isArray(exposedAtoms)) {\n    const state: Record<string, unknown> = {};\n\n    for (const atom of exposedAtoms) {\n      try {\n        const label = atom.debugLabel || atom.toString();\n        state[label] = exposedStore.get(atom);\n      } catch {\n        // Atom might not be initialized\n      }\n    }\n\n    return Object.keys(state).length > 0 ? state : null;\n  }\n\n  return null;\n}\n\n/**\n * Jotai state adapter\n */\nexport const jotaiAdapter: StateAdapter = {\n  name: 'jotai',\n\n  isAvailable(): boolean {\n    return findJotaiState() !== null;\n  },\n\n  getState(): Record<string, unknown> | null {\n    return findJotaiState();\n  },\n};\n\n/**\n * Helper to expose Jotai store for the context reporter\n * Add this to your app: exposeJotaiStore(store, [atom1, atom2, ...])\n */\nexport function exposeJotaiStore(store: JotaiStore, atoms: JotaiAtom[]): void {\n  const win = window as unknown as Record<string, unknown>;\n  win.__JOTAI_STORE__ = store;\n  win.__JOTAI_ATOMS__ = atoms;\n}\n","import type { CapturedAppState, StateAdapter } from '../types';\nimport { zustandAdapter, exposeZustandStore } from './zustand';\nimport { reduxAdapter, exposeReduxStore } from './redux';\nimport { jotaiAdapter, exposeJotaiStore } from './jotai';\n\n// All available state adapters\nconst adapters: StateAdapter[] = [zustandAdapter, reduxAdapter, jotaiAdapter];\n\n/**\n * Capture state from all available state managers\n */\nexport function captureAppState(\n  customStateGetter?: () => unknown,\n  excludeKeys?: string[]\n): CapturedAppState {\n  const state: CapturedAppState = {};\n\n  for (const adapter of adapters) {\n    if (adapter.isAvailable()) {\n      const adapterState = adapter.getState();\n      if (adapterState) {\n        // Filter out excluded keys\n        let filteredState = excludeKeys\n          ? filterState(adapterState, excludeKeys)\n          : adapterState;\n\n        // Clean out null/empty values and noise\n        filteredState = cleanState(filteredState) as Record<string, unknown>;\n\n        if (filteredState && Object.keys(filteredState).length > 0) {\n          state[adapter.name as keyof CapturedAppState] = filteredState;\n        }\n      }\n    }\n  }\n\n  // Add custom state if provided\n  if (customStateGetter) {\n    try {\n      const customState = cleanState(customStateGetter());\n      if (isMeaningfulValue(customState)) {\n        state.custom = customState;\n      }\n    } catch (error) {\n      console.warn('[ContextReporter] Error capturing custom state:', error);\n    }\n  }\n\n  return state;\n}\n\n/**\n * Keys that are noise in state captures\n */\nconst NOISE_KEYS = new Set([\n  'persist',\n  'listeners',\n  '_hasHydrated',\n  '_persist',\n  'rehydrated',\n]);\n\n/**\n * Check if a value is meaningful (not null, undefined, empty, false, or noise)\n */\nfunction isMeaningfulValue(value: unknown): boolean {\n  if (value === null || value === undefined) return false;\n  if (value === '') return false;\n  if (value === false) return false; // Skip false booleans (default state)\n  if (Array.isArray(value) && value.length === 0) return false;\n  if (typeof value === 'object' && Object.keys(value).length === 0) return false;\n  return true;\n}\n\n/**\n * Clean state by removing null/empty values and noise\n */\nfunction cleanState(state: unknown): unknown {\n  if (state === null || state === undefined) return undefined;\n\n  if (Array.isArray(state)) {\n    const cleaned = state\n      .map(cleanState)\n      .filter(isMeaningfulValue);\n    return cleaned.length > 0 ? cleaned : undefined;\n  }\n\n  if (typeof state === 'object') {\n    const obj = state as Record<string, unknown>;\n    const cleaned: Record<string, unknown> = {};\n    let hasValue = false;\n\n    for (const [key, value] of Object.entries(obj)) {\n      // Skip noise keys\n      if (NOISE_KEYS.has(key)) continue;\n\n      // Skip React internals\n      if (key.startsWith('$$') || key.startsWith('_')) continue;\n\n      const cleanedValue = cleanState(value);\n      if (isMeaningfulValue(cleanedValue)) {\n        cleaned[key] = cleanedValue;\n        hasValue = true;\n      }\n    }\n\n    return hasValue ? cleaned : undefined;\n  }\n\n  return state;\n}\n\n/**\n * Filter out sensitive or excluded keys from state\n */\nfunction filterState(\n  state: Record<string, unknown>,\n  excludeKeys: string[]\n): Record<string, unknown> {\n  const filtered: Record<string, unknown> = {};\n\n  for (const [key, value] of Object.entries(state)) {\n    if (excludeKeys.includes(key)) {\n      filtered[key] = '[REDACTED]';\n    } else if (value && typeof value === 'object' && !Array.isArray(value)) {\n      filtered[key] = filterState(value as Record<string, unknown>, excludeKeys);\n    } else {\n      filtered[key] = value;\n    }\n  }\n\n  return filtered;\n}\n\n/**\n * Check if any state manager is available\n */\nexport function hasAvailableStateManager(): boolean {\n  return adapters.some((adapter) => adapter.isAvailable());\n}\n\n/**\n * Get list of available state managers\n */\nexport function getAvailableStateManagers(): string[] {\n  return adapters.filter((adapter) => adapter.isAvailable()).map((adapter) => adapter.name);\n}\n\n// Re-export helpers for apps to expose their stores\nexport { exposeZustandStore, exposeReduxStore, exposeJotaiStore };\n","import { useState, useCallback } from 'react';\nimport html2canvas from 'html2canvas';\n\nexport interface UseScreenshotReturn {\n  capture: (element?: HTMLElement) => Promise<string | null>;\n  isCapturing: boolean;\n  error: Error | null;\n}\n\n/**\n * Modern CSS color functions not supported by html2canvas\n */\nconst UNSUPPORTED_COLOR_REGEX = /\\b(lab|lch|oklch|oklab|color-mix|color)\\s*\\([^)]*\\)/gi;\n\n/**\n * Sanitize CSS to replace unsupported color functions with fallbacks\n */\nfunction sanitizeStyles(clonedDoc: Document): void {\n  // Process all stylesheets\n  const styleSheets = clonedDoc.styleSheets;\n  for (let i = 0; i < styleSheets.length; i++) {\n    try {\n      const sheet = styleSheets[i];\n      const rules = sheet.cssRules || sheet.rules;\n      if (!rules) continue;\n\n      for (let j = 0; j < rules.length; j++) {\n        const rule = rules[j] as CSSStyleRule;\n        if (rule.style) {\n          // Check each style property\n          for (let k = 0; k < rule.style.length; k++) {\n            const prop = rule.style[k];\n            const value = rule.style.getPropertyValue(prop);\n            if (UNSUPPORTED_COLOR_REGEX.test(value)) {\n              // Replace with transparent or a fallback\n              rule.style.setProperty(prop, 'transparent', rule.style.getPropertyPriority(prop));\n            }\n          }\n        }\n      }\n    } catch {\n      // Cross-origin stylesheets will throw, ignore them\n    }\n  }\n\n  // Also process inline styles\n  const elementsWithStyle = clonedDoc.querySelectorAll('[style]');\n  elementsWithStyle.forEach((el) => {\n    const style = (el as HTMLElement).style;\n    for (let i = 0; i < style.length; i++) {\n      const prop = style[i];\n      const value = style.getPropertyValue(prop);\n      if (UNSUPPORTED_COLOR_REGEX.test(value)) {\n        style.setProperty(prop, 'transparent', style.getPropertyPriority(prop));\n      }\n    }\n  });\n}\n\n/**\n * Hook for capturing screenshots using html2canvas\n */\nexport function useScreenshot(): UseScreenshotReturn {\n  const [isCapturing, setIsCapturing] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const capture = useCallback(async (element?: HTMLElement): Promise<string | null> => {\n    setIsCapturing(true);\n    setError(null);\n\n    try {\n      const targetElement = element || document.body;\n\n      // Configure html2canvas options\n      const canvas = await html2canvas(targetElement, {\n        // Use higher scale for better quality\n        scale: window.devicePixelRatio || 1,\n        // Capture entire scrollable area or just viewport\n        windowWidth: window.innerWidth,\n        windowHeight: window.innerHeight,\n        // Don't capture scrolled content\n        scrollX: 0,\n        scrollY: 0,\n        // Disable logging to reduce console noise\n        logging: false,\n        // Handle cross-origin images\n        useCORS: true,\n        allowTaint: true,\n        // Ignore elements with this attribute\n        ignoreElements: (el) => {\n          return el.hasAttribute('data-context-reporter');\n        },\n        // Sanitize the cloned document to handle unsupported CSS\n        onclone: (clonedDoc) => {\n          try {\n            sanitizeStyles(clonedDoc);\n          } catch (e) {\n            // Don't fail the whole capture if sanitization fails\n            console.warn('[ContextReporter] Style sanitization warning:', e);\n          }\n        },\n      });\n\n      // Convert to base64 data URL\n      const dataUrl = canvas.toDataURL('image/png');\n\n      setIsCapturing(false);\n      return dataUrl;\n    } catch (err) {\n      // Don't treat html2canvas errors as fatal - report without screenshot\n      const message = err instanceof Error ? err.message : 'Unknown error';\n      console.warn('[ContextReporter] Screenshot capture failed, continuing without screenshot:', message);\n      setError(err instanceof Error ? err : new Error('Screenshot capture failed'));\n      setIsCapturing(false);\n      // Return null but don't throw - allow report to proceed without screenshot\n      return null;\n    }\n  }, []);\n\n  return {\n    capture,\n    isCapturing,\n    error,\n  };\n}\n","import { useState, useCallback, useEffect } from 'react';\nimport type { ContextReport, ContextScreenshot, ReporterConfig } from '../types';\nimport { extractElementInfo } from '../utils/dom-utils';\nimport { extractComponentPath } from '../utils/component-path';\nimport {\n  generateReportId,\n  createContextReport,\n  logContextReport,\n  logContextScreenshot,\n} from '../utils/reporter';\nimport {\n  startConsoleCapture,\n  getRecentConsoleEntries,\n} from '../utils/console-capture';\nimport { captureAppState } from '../state-adapters';\nimport { useScreenshot } from './useScreenshot';\n\nexport interface UseContextCaptureOptions {\n  getCustomState?: () => unknown;\n  excludeStateKeys?: string[];\n  onCapture?: (report: ContextReport) => void;\n  /** Reporter configuration */\n  reporter?: ReporterConfig;\n}\n\nexport interface UseContextCaptureReturn {\n  captureContext: (element: HTMLElement, description?: string) => Promise<ContextReport | null>;\n  isCapturing: boolean;\n  lastReport: ContextReport | null;\n  /** Whether the last report was sent to server or console */\n  lastReportMethod: 'server' | 'console' | null;\n  error: Error | null;\n}\n\n/**\n * Hook for orchestrating the full context capture process\n */\nexport function useContextCapture(\n  options: UseContextCaptureOptions = {}\n): UseContextCaptureReturn {\n  const { getCustomState, excludeStateKeys, onCapture, reporter } = options;\n\n  const [isCapturing, setIsCapturing] = useState(false);\n  const [lastReport, setLastReport] = useState<ContextReport | null>(null);\n  const [lastReportMethod, setLastReportMethod] = useState<'server' | 'console' | null>(null);\n  const [error, setError] = useState<Error | null>(null);\n\n  const { capture: captureScreenshot, isCapturing: isCapturingScreenshot } = useScreenshot();\n\n  // Start console capture on mount\n  useEffect(() => {\n    startConsoleCapture();\n  }, []);\n\n  const captureContext = useCallback(\n    async (element: HTMLElement, description?: string): Promise<ContextReport | null> => {\n      setIsCapturing(true);\n      setError(null);\n\n      try {\n        // Generate unique report ID\n        const reportId = generateReportId();\n\n        // Extract element information\n        const elementInfo = extractElementInfo(element);\n\n        // Extract component path\n        const componentPath = extractComponentPath(element);\n\n        // Capture application state\n        const appState = captureAppState(getCustomState, excludeStateKeys);\n\n        // Get recent console errors\n        const consoleErrors = getRecentConsoleEntries(30000); // Last 30 seconds\n\n        // Create the report\n        const report = createContextReport({\n          id: reportId,\n          selectedElement: elementInfo,\n          componentPath,\n          appState,\n          description,\n          consoleErrors: consoleErrors.length > 0 ? consoleErrors : undefined,\n        });\n\n        // Log the report FIRST (tries server first, falls back to console)\n        // This ensures report is saved even if screenshot fails\n        const reportResult = await logContextReport(report, reporter);\n        setLastReportMethod(reportResult.method);\n\n        // Update state\n        setLastReport(report);\n\n        // Call onCapture callback if provided\n        if (onCapture) {\n          onCapture(report);\n        }\n\n        // Now try to capture screenshot (non-blocking, errors won't affect report)\n        try {\n          const screenshotData = await captureScreenshot();\n          if (screenshotData) {\n            const screenshot: ContextScreenshot = {\n              reportId,\n              data: screenshotData,\n            };\n            await logContextScreenshot(screenshot, reporter);\n          }\n        } catch (screenshotErr) {\n          // Screenshot failed but report was already saved - just log warning\n          console.warn('[ContextReporter] Screenshot capture failed:', screenshotErr);\n        }\n\n        setIsCapturing(false);\n        return report;\n      } catch (err) {\n        const captureError = err instanceof Error ? err : new Error('Context capture failed');\n        setError(captureError);\n        setIsCapturing(false);\n        console.error('[ContextReporter] Context capture failed:', err);\n        return null;\n      }\n    },\n    [getCustomState, excludeStateKeys, onCapture, reporter, captureScreenshot]\n  );\n\n  return {\n    captureContext,\n    isCapturing: isCapturing || isCapturingScreenshot,\n    lastReport,\n    lastReportMethod,\n    error,\n  };\n}\n","import React from 'react';\nimport type { ButtonPosition } from '../types';\n\nexport interface FloatingButtonProps {\n  position: ButtonPosition;\n  onClick: () => void;\n  isActive: boolean;\n  zIndex: number;\n}\n\nconst positionStyles: Record<ButtonPosition, React.CSSProperties> = {\n  'bottom-right': { bottom: 20, right: 20 },\n  'bottom-left': { bottom: 20, left: 20 },\n  'top-right': { top: 20, right: 20 },\n  'top-left': { top: 20, left: 20 },\n};\n\n/**\n * Floating button to trigger context capture\n */\nexport function FloatingButton({\n  position,\n  onClick,\n  isActive,\n  zIndex,\n}: FloatingButtonProps): React.ReactElement {\n  return (\n    <button\n      data-context-reporter=\"button\"\n      onClick={onClick}\n      style={{\n        position: 'fixed',\n        ...positionStyles[position],\n        zIndex,\n        width: 48,\n        height: 48,\n        borderRadius: '50%',\n        border: 'none',\n        backgroundColor: isActive ? '#ef4444' : '#6366f1',\n        color: 'white',\n        cursor: 'pointer',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',\n        transition: 'all 0.2s ease',\n        outline: 'none',\n      }}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.transform = 'scale(1.1)';\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.transform = 'scale(1)';\n      }}\n      title={isActive ? 'Cancel capture (Esc)' : 'Capture context for Claude'}\n      aria-label={isActive ? 'Cancel capture' : 'Capture context'}\n    >\n      {isActive ? (\n        // X icon when active\n        <svg\n          width=\"24\"\n          height=\"24\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        >\n          <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n          <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n        </svg>\n      ) : (\n        // Crosshair/target icon when inactive\n        <svg\n          width=\"24\"\n          height=\"24\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        >\n          <circle cx=\"12\" cy=\"12\" r=\"10\" />\n          <line x1=\"22\" y1=\"12\" x2=\"18\" y2=\"12\" />\n          <line x1=\"6\" y1=\"12\" x2=\"2\" y2=\"12\" />\n          <line x1=\"12\" y1=\"6\" x2=\"12\" y2=\"2\" />\n          <line x1=\"12\" y1=\"22\" x2=\"12\" y2=\"18\" />\n        </svg>\n      )}\n    </button>\n  );\n}\n","import React from 'react';\n\nexport interface ElementPickerProps {\n  isActive: boolean;\n  highlightPosition: {\n    top: number;\n    left: number;\n    width: number;\n    height: number;\n  } | null;\n  zIndex: number;\n}\n\n/**\n * Overlay that shows element highlighting during selection\n */\nexport function ElementPicker({\n  isActive,\n  highlightPosition,\n  zIndex,\n}: ElementPickerProps): React.ReactElement | null {\n  if (!isActive) {\n    return null;\n  }\n\n  return (\n    <>\n      {/* Full-screen overlay to capture all clicks */}\n      <div\n        data-context-reporter=\"overlay\"\n        style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          zIndex: zIndex - 1,\n          pointerEvents: 'none',\n        }}\n      />\n\n      {/* Highlight box */}\n      {highlightPosition && (\n        <div\n          data-context-reporter=\"highlight\"\n          style={{\n            position: 'absolute',\n            top: highlightPosition.top,\n            left: highlightPosition.left,\n            width: highlightPosition.width,\n            height: highlightPosition.height,\n            border: '2px solid #6366f1',\n            backgroundColor: 'rgba(99, 102, 241, 0.1)',\n            pointerEvents: 'none',\n            zIndex,\n            transition: 'all 0.05s ease-out',\n            borderRadius: 2,\n          }}\n        >\n          {/* Element info tooltip */}\n          <div\n            style={{\n              position: 'absolute',\n              top: -28,\n              left: 0,\n              backgroundColor: '#6366f1',\n              color: 'white',\n              padding: '4px 8px',\n              borderRadius: 4,\n              fontSize: 12,\n              fontFamily: 'monospace',\n              whiteSpace: 'nowrap',\n              pointerEvents: 'none',\n            }}\n          >\n            Click to select\n          </div>\n        </div>\n      )}\n\n      {/* Instructions banner */}\n      <div\n        data-context-reporter=\"banner\"\n        style={{\n          position: 'fixed',\n          top: 20,\n          left: '50%',\n          transform: 'translateX(-50%)',\n          backgroundColor: '#1f2937',\n          color: 'white',\n          padding: '12px 24px',\n          borderRadius: 8,\n          fontSize: 14,\n          fontWeight: 500,\n          zIndex,\n          boxShadow: '0 4px 12px rgba(0, 0, 0, 0.3)',\n          display: 'flex',\n          alignItems: 'center',\n          gap: 12,\n        }}\n      >\n        <svg\n          width=\"20\"\n          height=\"20\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        >\n          <circle cx=\"12\" cy=\"12\" r=\"10\" />\n          <line x1=\"22\" y1=\"12\" x2=\"18\" y2=\"12\" />\n          <line x1=\"6\" y1=\"12\" x2=\"2\" y2=\"12\" />\n          <line x1=\"12\" y1=\"6\" x2=\"12\" y2=\"2\" />\n          <line x1=\"12\" y1=\"22\" x2=\"12\" y2=\"18\" />\n        </svg>\n        <span>Click on an element to capture context</span>\n        <span style={{ opacity: 0.7, marginLeft: 8 }}>Press Esc to cancel</span>\n      </div>\n    </>\n  );\n}\n","import React, { useState, useRef, useEffect } from 'react';\n\nexport interface DescriptionModalProps {\n  isOpen: boolean;\n  onSubmit: (description: string) => void;\n  onCancel: () => void;\n  zIndex: number;\n}\n\n/**\n * Modal for adding an optional description to the context report\n */\nexport function DescriptionModal({\n  isOpen,\n  onSubmit,\n  onCancel,\n  zIndex,\n}: DescriptionModalProps): React.ReactElement | null {\n  const [description, setDescription] = useState('');\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  // Focus textarea when modal opens\n  useEffect(() => {\n    if (isOpen && textareaRef.current) {\n      textareaRef.current.focus();\n    }\n  }, [isOpen]);\n\n  // Handle escape key\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onCancel();\n      } else if (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {\n        onSubmit(description);\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('keydown', handleKeyDown);\n      return () => document.removeEventListener('keydown', handleKeyDown);\n    }\n  }, [isOpen, description, onSubmit, onCancel]);\n\n  if (!isOpen) {\n    return null;\n  }\n\n  return (\n    <div\n      data-context-reporter=\"modal-overlay\"\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex,\n      }}\n      onClick={onCancel}\n    >\n      <div\n        data-context-reporter=\"modal\"\n        style={{\n          backgroundColor: 'white',\n          borderRadius: 12,\n          padding: 24,\n          width: '100%',\n          maxWidth: 480,\n          boxShadow: '0 20px 40px rgba(0, 0, 0, 0.2)',\n        }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        <h2\n          style={{\n            margin: '0 0 16px 0',\n            fontSize: 18,\n            fontWeight: 600,\n            color: '#111827',\n          }}\n        >\n          Add Description (Optional)\n        </h2>\n\n        <p\n          style={{\n            margin: '0 0 16px 0',\n            fontSize: 14,\n            color: '#6b7280',\n          }}\n        >\n          Describe what&apos;s wrong or what you&apos;d like to fix. This helps Claude understand\n          the issue.\n        </p>\n\n        <textarea\n          ref={textareaRef}\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n          placeholder=\"e.g., 'Button doesn't respond to clicks' or 'Styling looks broken on mobile'\"\n          style={{\n            width: '100%',\n            minHeight: 100,\n            padding: 12,\n            borderRadius: 8,\n            border: '1px solid #d1d5db',\n            fontSize: 14,\n            resize: 'vertical',\n            outline: 'none',\n            fontFamily: 'inherit',\n            boxSizing: 'border-box',\n          }}\n          onFocus={(e) => {\n            e.currentTarget.style.borderColor = '#6366f1';\n            e.currentTarget.style.boxShadow = '0 0 0 3px rgba(99, 102, 241, 0.1)';\n          }}\n          onBlur={(e) => {\n            e.currentTarget.style.borderColor = '#d1d5db';\n            e.currentTarget.style.boxShadow = 'none';\n          }}\n        />\n\n        <div\n          style={{\n            display: 'flex',\n            justifyContent: 'flex-end',\n            gap: 12,\n            marginTop: 16,\n          }}\n        >\n          <button\n            onClick={onCancel}\n            style={{\n              padding: '10px 20px',\n              borderRadius: 8,\n              border: '1px solid #d1d5db',\n              backgroundColor: 'white',\n              color: '#374151',\n              fontSize: 14,\n              fontWeight: 500,\n              cursor: 'pointer',\n            }}\n          >\n            Skip\n          </button>\n\n          <button\n            onClick={() => onSubmit(description)}\n            style={{\n              padding: '10px 20px',\n              borderRadius: 8,\n              border: 'none',\n              backgroundColor: '#6366f1',\n              color: 'white',\n              fontSize: 14,\n              fontWeight: 500,\n              cursor: 'pointer',\n            }}\n          >\n            Capture\n            <span style={{ opacity: 0.7, marginLeft: 8, fontSize: 12 }}>\n              {navigator.platform.includes('Mac') ? '' : 'Ctrl'}+Enter\n            </span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nexport interface CaptureToastProps {\n  isVisible: boolean;\n  onHide: () => void;\n  reportId: string;\n  /** Whether the report was sent to server or console */\n  method?: 'server' | 'console';\n  zIndex: number;\n}\n\n/**\n * Toast notification shown after successful capture\n */\nexport function CaptureToast({\n  isVisible,\n  onHide,\n  reportId,\n  method = 'console',\n  zIndex,\n}: CaptureToastProps): React.ReactElement | null {\n  const [isAnimating, setIsAnimating] = useState(false);\n\n  useEffect(() => {\n    if (isVisible) {\n      setIsAnimating(true);\n      const timer = setTimeout(() => {\n        setIsAnimating(false);\n        setTimeout(onHide, 200); // Wait for exit animation\n      }, 3000);\n\n      return () => clearTimeout(timer);\n    }\n  }, [isVisible, onHide]);\n\n  if (!isVisible && !isAnimating) {\n    return null;\n  }\n\n  const isServer = method === 'server';\n\n  return (\n    <div\n      data-context-reporter=\"toast\"\n      style={{\n        position: 'fixed',\n        bottom: 80,\n        right: 20,\n        backgroundColor: isServer ? '#059669' : '#6366f1',\n        color: 'white',\n        padding: '12px 20px',\n        borderRadius: 8,\n        fontSize: 14,\n        fontWeight: 500,\n        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',\n        zIndex,\n        display: 'flex',\n        alignItems: 'center',\n        gap: 12,\n        transform: isAnimating ? 'translateX(0)' : 'translateX(120%)',\n        opacity: isAnimating ? 1 : 0,\n        transition: 'all 0.2s ease-out',\n      }}\n    >\n      {/* Checkmark icon */}\n      <svg\n        width=\"20\"\n        height=\"20\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      >\n        <polyline points=\"20 6 9 17 4 12\" />\n      </svg>\n\n      <div>\n        <div>Context captured!</div>\n        <div style={{ fontSize: 12, opacity: 0.8, marginTop: 2 }}>\n          {isServer ? (\n            <>Saved to <code style={{ fontFamily: 'monospace' }}>./reports/</code></>\n          ) : (\n            <>Run <code style={{ fontFamily: 'monospace' }}>/context-reports</code> in Claude Code</>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useCallback, useEffect } from 'react';\nimport type { ContextReporterProps } from '../types';\nimport { useElementPicker } from '../hooks/useElementPicker';\nimport { useContextCapture } from '../hooks/useContextCapture';\nimport { FloatingButton } from './FloatingButton';\nimport { ElementPicker } from './ElementPicker';\nimport { DescriptionModal } from './DescriptionModal';\nimport { CaptureToast } from './CaptureToast';\n\ntype CaptureState = 'idle' | 'picking' | 'describing' | 'capturing';\n\n/**\n * Main context reporter component\n *\n * Add to your app layout in development mode:\n * ```tsx\n * {process.env.NODE_ENV === 'development' && <ContextReporter />}\n * ```\n *\n * The component will automatically try to send reports to a local server\n * (http://localhost:9847 by default). If the server is not running,\n * it falls back to logging reports to the browser console.\n *\n * To start the server, run: npx claude-context-reporter-server\n */\nexport function ContextReporter({\n  position = 'bottom-right',\n  hotkey = 'ctrl+shift+.',\n  getCustomState,\n  excludeStateKeys,\n  onCapture,\n  zIndex = 9999,\n  reporter,\n}: ContextReporterProps): React.ReactElement {\n  const [captureState, setCaptureState] = useState<CaptureState>('idle');\n  const [selectedElement, setSelectedElement] = useState<HTMLElement | null>(null);\n  const [showToast, setShowToast] = useState(false);\n  const [lastReportId, setLastReportId] = useState('');\n  const [toastMethod, setToastMethod] = useState<'server' | 'console'>('console');\n\n  const { captureContext, isCapturing, lastReportMethod } = useContextCapture({\n    getCustomState,\n    excludeStateKeys,\n    onCapture,\n    reporter,\n  });\n\n  const handleElementSelected = useCallback((element: HTMLElement) => {\n    setSelectedElement(element);\n    setCaptureState('describing');\n  }, []);\n\n  const { state: pickerState, startPicking, stopPicking, highlightPosition } =\n    useElementPicker(handleElementSelected);\n\n  // Handle button click\n  const handleButtonClick = useCallback(() => {\n    if (captureState === 'picking') {\n      stopPicking();\n      setCaptureState('idle');\n    } else {\n      startPicking();\n      setCaptureState('picking');\n    }\n  }, [captureState, startPicking, stopPicking]);\n\n  // Handle description submit\n  const handleDescriptionSubmit = useCallback(\n    async (description: string) => {\n      if (!selectedElement) return;\n\n      setCaptureState('capturing');\n\n      const report = await captureContext(selectedElement, description || undefined);\n\n      if (report) {\n        setLastReportId(report.id);\n        setToastMethod(lastReportMethod || 'console');\n        setShowToast(true);\n      }\n\n      setCaptureState('idle');\n      setSelectedElement(null);\n    },\n    [selectedElement, captureContext, lastReportMethod]\n  );\n\n  // Handle description cancel\n  const handleDescriptionCancel = useCallback(() => {\n    setCaptureState('idle');\n    setSelectedElement(null);\n  }, []);\n\n  // Handle hotkey\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const parts = hotkey.toLowerCase().split('+');\n      const key = parts[parts.length - 1];\n      const needsCtrl = parts.includes('ctrl');\n      const needsShift = parts.includes('shift');\n      const needsMeta = parts.includes('meta') || parts.includes('cmd');\n      const needsAlt = parts.includes('alt');\n\n      const keyMatches = e.key.toLowerCase() === key || e.key === key;\n      const ctrlMatches = !needsCtrl || e.ctrlKey;\n      const shiftMatches = !needsShift || e.shiftKey;\n      const metaMatches = !needsMeta || e.metaKey;\n      const altMatches = !needsAlt || e.altKey;\n\n      if (keyMatches && ctrlMatches && shiftMatches && metaMatches && altMatches) {\n        e.preventDefault();\n        handleButtonClick();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [hotkey, handleButtonClick]);\n\n  // Sync picker state\n  useEffect(() => {\n    if (!pickerState.isActive && captureState === 'picking') {\n      setCaptureState('idle');\n    }\n  }, [pickerState.isActive, captureState]);\n\n  return (\n    <div data-context-reporter=\"root\">\n      <FloatingButton\n        position={position}\n        onClick={handleButtonClick}\n        isActive={captureState === 'picking'}\n        zIndex={zIndex}\n      />\n\n      <ElementPicker\n        isActive={captureState === 'picking'}\n        highlightPosition={highlightPosition}\n        zIndex={zIndex}\n      />\n\n      <DescriptionModal\n        isOpen={captureState === 'describing'}\n        onSubmit={handleDescriptionSubmit}\n        onCancel={handleDescriptionCancel}\n        zIndex={zIndex + 1}\n      />\n\n      <CaptureToast\n        isVisible={showToast}\n        onHide={() => setShowToast(false)}\n        reportId={lastReportId}\n        method={toastMethod}\n        zIndex={zIndex}\n      />\n\n      {/* Loading overlay during capture */}\n      {isCapturing && (\n        <div\n          data-context-reporter=\"loading\"\n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            backgroundColor: 'rgba(0, 0, 0, 0.3)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: zIndex + 2,\n          }}\n        >\n          <div\n            style={{\n              backgroundColor: 'white',\n              padding: '20px 32px',\n              borderRadius: 12,\n              fontSize: 16,\n              fontWeight: 500,\n              boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',\n            }}\n          >\n            Capturing context...\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"]}